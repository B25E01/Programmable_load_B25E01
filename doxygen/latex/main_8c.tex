\doxysection{main/main.c File Reference}
\hypertarget{main_8c}{}\label{main_8c}\index{main/main.c@{main/main.c}}


Hovedfil for applikasjonen.  


{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include "{}driver/gpio.\+h"{}}\newline
{\ttfamily \#include "{}esp\+\_\+log.\+h"{}}\newline
{\ttfamily \#include "{}freertos/\+Free\+RTOS.\+h"{}}\newline
{\ttfamily \#include "{}freertos/task.\+h"{}}\newline
{\ttfamily \#include "{}driver/ledc.\+h"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{main_8c_a630544a7f0a2cc40d8a7fefab7e2fe70}{app\+\_\+main}} (void)
\begin{DoxyCompactList}\small\item\em Hovedfunksjon for applikasjonen. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Hovedfil for applikasjonen. 



Definition in file \mbox{\hyperlink{main_8c_source}{main.\+c}}.



\doxysubsection{Function Documentation}
\Hypertarget{main_8c_a630544a7f0a2cc40d8a7fefab7e2fe70}\index{main.c@{main.c}!app\_main@{app\_main}}
\index{app\_main@{app\_main}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{app\_main()}{app\_main()}}
{\footnotesize\ttfamily \label{main_8c_a630544a7f0a2cc40d8a7fefab7e2fe70} 
void app\+\_\+main (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Hovedfunksjon for applikasjonen. 

Konfigurerer GPIO og PWM, og kjører en uendelig løkke for å justere PWM-\/duty cycle. PWM-\/timer konfigurasjon (4000 Hz, 14-\/bit oppløsning)

PWM-\/kanal konfigurasjon for GPIO 10

Definition at line \mbox{\hyperlink{main_8c_source_l00018}{18}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00019\ \ \{}
\DoxyCodeLine{00020\ \ \ \ \ \ \textcolor{comment}{//\ Konfigurer\ GPIO\ 10\ med\ pull-\/down}}
\DoxyCodeLine{00021\ \ \ \ \ \ gpio\_set\_pull\_mode(GPIO\_NUM\_10,\ GPIO\_PULLDOWN\_ONLY);}
\DoxyCodeLine{00022\ \ }
\DoxyCodeLine{00026\ \ \ \ \ \ ledc\_timer\_config\_t\ pwm\_timer\ =\ \{}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \ .clk\_cfg\ =\ LEDC\_AUTO\_CLK,}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \ .speed\_mode\ =\ LEDC\_LOW\_SPEED\_MODE,}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \ .duty\_resolution\ =\ LEDC\_TIMER\_14\_BIT,}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \ .timer\_num\ =\ LEDC\_TIMER\_0,}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ .freq\_hz\ =\ 4000}
\DoxyCodeLine{00032\ \ \ \ \ \ \};}
\DoxyCodeLine{00033\ \ \ \ \ \ ESP\_ERROR\_CHECK(ledc\_timer\_config(\&pwm\_timer));}
\DoxyCodeLine{00034\ \ \ \ \ \ }
\DoxyCodeLine{00038\ \ \ \ \ \ ledc\_channel\_config\_t\ pwm\_config\ =\ \{}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ .gpio\_num\ =\ GPIO\_NUM\_10,}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ .speed\_mode\ =\ LEDC\_LOW\_SPEED\_MODE,}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ .channel\ =\ LEDC\_CHANNEL\_0,}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ .timer\_sel\ =\ LEDC\_TIMER\_0,}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ .intr\_type\ =\ LEDC\_INTR\_DISABLE,}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ .duty\ =\ 0,}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ .hpoint\ =\ 0}
\DoxyCodeLine{00046\ \ \ \ \ \ \};}
\DoxyCodeLine{00047\ \ \ \ \ \ ESP\_ERROR\_CHECK(ledc\_channel\_config(\&pwm\_config));}
\DoxyCodeLine{00048\ \ }
\DoxyCodeLine{00049\ \ \ \ \ \ \textcolor{keywordflow}{while}\ (1)\ \{}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Øk\ PWM-\/duty\ cycle\ sakte\ fra\ 15000\ til\ 16383}}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 15000;\ i\ <\ 16383;\ i++)\ \{}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \ ESP\_ERROR\_CHECK(ledc\_set\_duty(LEDC\_LOW\_SPEED\_MODE,\ LEDC\_CHANNEL\_0,\ i));}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ ESP\_ERROR\_CHECK(ledc\_update\_duty(LEDC\_LOW\_SPEED\_MODE,\ LEDC\_CHANNEL\_0));}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \ vTaskDelay(1);}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00056\ \ \ \ \ \ \}}
\DoxyCodeLine{00057\ \ \}}

\end{DoxyCode}
